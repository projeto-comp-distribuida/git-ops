image:
  repository: distrischooldevacr.azurecr.io/microservice-frontend
  tag: "latest"
  pullPolicy: Always

imagePullSecrets:
  - name: acr-secret

replicaCount: 1

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 200m
    memory: 256Mi

env:
  - name: NODE_ENV
    value: "production"
  - name: NEXT_TELEMETRY_DISABLED
    value: "1"
  - name: PORT
    value: "3000"
  # Use external DNS name so browser sends DNS name in Origin header (not IP)
  # This ensures Origin header matches Host header for Spring Cloud Gateway CORS validation
  # Note: NEXT_PUBLIC_API_URL should NOT include /api - the frontend code adds paths like /api/v1/auth/**
  - name: NEXT_PUBLIC_API_URL
    value: "http://distrischool.ddns.net"
  - name: NEXT_PUBLIC_AUTH_SERVICE_URL
    value: "http://distrischool.ddns.net/api/v1/auth"
  - name: NEXT_PUBLIC_STUDENT_SERVICE_URL
    value: "http://distrischool.ddns.net/api/v1/students"
  - name: NEXT_PUBLIC_TEACHER_SERVICE_URL
    value: "http://distrischool.ddns.net/api/teachers"
  - name: NEXT_PUBLIC_TEACHER_MANAGEMENT_SERVICE_URL
    value: "http://distrischool.ddns.net/api/v1/teacher-management"
  - name: NEXT_PUBLIC_NOTIFICATION_SERVICE_URL
    value: "http://distrischool.ddns.net/api/v1/notifications"

secrets:
  enabled: false
  secretName: "distrischool-front-dev-secrets"

sealedSecrets:
  enabled: false

ingress:
  enabled: true
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/cors-allow-origin: "*"
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix
  tls: []

probe:
  startup:
    enabled: true
    useTcpSocket: true
    path: /
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 30
  liveness:
    enabled: true
    useTcpSocket: true
    path: /
    initialDelaySeconds: 30
    periodSeconds: 30
    timeoutSeconds: 5
    failureThreshold: 3
  readiness:
    enabled: true
    useTcpSocket: true
    path: /
    initialDelaySeconds: 15
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3


