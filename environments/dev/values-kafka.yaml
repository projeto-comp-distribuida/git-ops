# Environment-specific values for Kafka service in dev
# These values override the defaults in apps/kafka/values.yaml

fullnameOverride: "kafka"

replicaCount: 1

resources:
  limits:
    cpu: 1000m
    memory: 768Mi
  requests:
    cpu: 200m
    memory: 256Mi

# Service names for dependencies
# These reference the actual service names in the infrastructure-dev namespace
zookeeper:
  serviceName: "zookeeper"  # Simple service name set via fullnameOverride
  servicePort: 2181

kafka:
  serviceName: "kafka"  # Simple service name set via fullnameOverride
  internalPort: 29092

# Cap Kafka JVM heap to fit within limit while leaving headroom
env:
  KAFKA_HEAP_OPTS: "-Xms256m -Xmx512m"

# Persistent volume configuration
persistence:
  enabled: true
  size: 10Gi
  accessModes:
    - ReadWriteOnce
  storageClassName: ""  # Use default storage class

# Probe configuration overrides
probe:
  startup:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 15
    timeoutSeconds: 60
    failureThreshold: 30
  liveness:
    enabled: true
    initialDelaySeconds: 120
    periodSeconds: 30
    timeoutSeconds: 60
    failureThreshold: 5
  readiness:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 10
    timeoutSeconds: 60
    failureThreshold: 5

